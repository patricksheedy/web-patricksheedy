document.addEventListener('DOMContentLoaded',function(){const compareBtn=document.getElementById('compare-btn');const results=document.getElementById('results');function calculateLoan(amount,rate,years){const monthlyRate=rate/100/12;const payments=years*12;const monthly=(amount*monthlyRate*Math.pow(1+monthlyRate,payments))/(Math.pow(1+monthlyRate,payments)-1);const total=monthly*payments;const interest=total-amount;return{monthly:monthly,total:total,interest:interest}}compareBtn.addEventListener('click',function(){const loans=[];for(let i=1;i<=3;i++){const amount=parseFloat(document.getElementById('amount'+i).value)||0;const rate=parseFloat(document.getElementById('rate'+i).value)||0;const term=parseFloat(document.getElementById('term'+i).value)||0;if(amount>0&&rate>0&&term>0){loans.push({id:i,amount:amount,rate:rate,term:term,...calculateLoan(amount,rate,term)})}}if(loans.length===0){alert('Please enter valid loan details');return}loans.forEach(loan=>{document.getElementById('payment'+loan.id).textContent='$'+loan.monthly.toFixed(2);document.getElementById('interest'+loan.id).textContent='$'+loan.interest.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,',');document.getElementById('total'+loan.id).textContent='$'+loan.total.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,',')});const bestLoan=loans.reduce((best,current)=>current.total<best.total?current:best);document.getElementById('best-loan-text').innerHTML=`<strong>Loan ${bestLoan.id}</strong> has the lowest total cost at <strong>$${bestLoan.total.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,',')}</strong>`;const worstLoan=loans.reduce((worst,current)=>current.total>worst.total?current:worst);const savings=worstLoan.total-bestLoan.total;document.getElementById('savings-text').innerHTML=`Choosing Loan ${bestLoan.id} over Loan ${worstLoan.id} saves you <strong class="text-success">$${savings.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,',')}</strong> over the life of the loan.`;results.style.display='block'})});
